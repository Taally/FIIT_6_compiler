### AST-оптимизация заменой условного оператора на пустой оператор

#### Постановка задачи
Реализовать оптимизацию по AST дереву вида if (ex) null; else null; => null

#### Команда
Карякин В.В., Карякин Д.В.

#### Зависимые и предшествующие задачи
Предшествующие задачи:
* построение AST дерева
* базовые визиторы по AST дереву

#### Теоретическая часть
Принцип работы данной оптимизации показан с помощью блок-схем, соответствующих некоторому поддереву абстрактного синтаксического дерева.

Ниже приведена блок-схема, которая соответствует условному оператору с пустыми узлами по true и false ветке выполнения. Узел ```IfNode``` подлежит оптимизации.

![Узлы AСT до оптимизации](1_OptIfNullElseNull/img1.png)

Данный узел ```IfNode``` должен быть заменён на пустой узел ```EmptyNode```.
Блок-схема ниже показывает, что происходит после применения этой оптимизации.

![Узлы AСT после оптимизации](1_OptIfNullElseNull/img2.png)

#### Практическая часть
Данная оптимизация реализована в виде визитора, унаследованного от класса ```ChangeVisitor```.
В визиторе переопределяется метод ```PostVisit```, таким образом, чтобы при значении ```EmptyNode``` или ```null``` веток по true и false условного оператора данный узел абстрактного синтаксического дерева заменялся на ```EmptyNode``` с помощью метода ```ReplaceStat``` унаследованного от класса ```ChangeVisitor```.

Реализация оптимизации:
```csharp
/* IfNullElseNull.cs */
public class IfNullElseNull : ChangeVisitor
{
    public override void PostVisit(Node n)
    {
        if (n is IfElseNode ifn)
        {
            if ((ifn.FalseStat is EmptyNode || ifn.FalseStat == null)
                && (ifn.TrueStat is EmptyNode || ifn.TrueStat == null))
            {
                ReplaceStat(ifn, new EmptyNode());
            }
        }
    }
}
```

#### Место в общем проекте (Интеграция)
Данная оптимизация выполняется вместе с остальными оптимизациями по абстрактному синтаксическому дереву.
```csharp
/* ASTOptimizer.cs */
public static List<ChangeVisitor> Optimizations { get; } = new List<ChangeVisitor>
{
    /* ... */
    new IfNullElseNull(),
    /* ... */
};
```

#### Пример работы
До оптимизации:
```csharp
a = true;
if (a)
    ;
else
    ;
```

После оптимизации:
```csharp
a = true;
```